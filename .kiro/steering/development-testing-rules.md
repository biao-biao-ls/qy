# 开发测试规则

## 开发模式启动测试规则

当需要测试 Electron 应用的开发模式启动时，必须遵循以下规则：

### 自动超时关闭规则
- **重要**: 开发模式命令（如 `npm run dev`）会启动长期运行的进程
- **必须**: 使用 `timeout` 命令或类似机制自动关闭进程
- **建议超时时间**: 10-15 秒足以验证启动成功
- **验证方式**: 通过输出日志判断是否启动成功

### 示例命令格式
```bash
# macOS/Linux 使用 timeout 命令
timeout 10s npm run dev

# 或者使用 gtimeout (如果安装了 coreutils)
gtimeout 10s npm run dev
```

### 成功启动的判断标准
开发模式启动成功通常包含以下输出信息：
- Vite 开发服务器启动信息
- Electron 主进程启动信息
- 端口监听信息（如 `Local: http://localhost:5173/`）
- 无致命错误信息

### 注意事项
- 不要让开发服务器无限期运行，这会阻塞后续操作
- 如果需要交互式测试，建议用户手动运行
- 构建测试（`npm run build`）可以正常运行到完成，因为它会自动结束

### 适用场景
此规则适用于所有需要启动开发服务器的命令：
- `npm run dev`
- `yarn dev`
- `npm start`
- 其他启动开发服务器的命令

### 错误处理
如果超时后进程仍在运行：
1. 检查是否有进程残留
2. 必要时使用 `pkill` 或类似命令清理
3. 向用户说明需要手动测试的情况